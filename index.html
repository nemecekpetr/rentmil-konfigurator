<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konfigurátor bazénů Rentmil</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(180deg, #48A9A6 0%, #01384B 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(1, 56, 75, 0.3);
            overflow: hidden;
        }
        
        .logo-container {
            text-align: center;
            padding: 40px 20px 20px;
            background: white;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .logo {
            max-width: 200px;
            height: auto;
        }
        
        header {
            background: #FF8621;
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 32px;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.95;
        }
        
        .progress-bar {
            background: #f3f4f6;
            padding: 24px;
        }
        
        .steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .step-item {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .step-circle.active {
            background: #FF8621;
            color: white;
            transform: scale(1.1);
        }
        
        .step-circle.completed {
            background: #48A9A6;
            color: white;
            cursor: pointer;
        }
        
        .step-circle.completed:hover {
            transform: scale(1.05);
        }
        
        .step-circle.pending {
            background: #d1d5db;
            color: #6b7280;
        }
        
        .step-line {
            flex: 1;
            height: 4px;
            margin: 0 8px;
            transition: background 0.3s;
        }
        
        .step-line.completed {
            background: #48A9A6;
        }
        
        .step-line.pending {
            background: #d1d5db;
        }
        
        .step-title {
            text-align: center;
            margin-top: 16px;
            font-size: 14px;
            font-weight: 600;
            color: #01384B;
        }
        
        .content {
            padding: 40px;
        }
        
        h2 {
            color: #01384B;
            font-size: 24px;
            margin-bottom: 24px;
            font-weight: 700;
        }
        
        .options-grid {
            display: grid;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .options-grid.col-2 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }
        
        .options-grid.col-3 {
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        }
        
        .option-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            position: relative;
        }
        
        .option-card:hover {
            border-color: #48A9A6;
            box-shadow: 0 4px 12px rgba(72, 169, 166, 0.15);
            transform: translateY(-2px);
        }
        
        .option-card.selected {
            border-color: #48A9A6;
            background: rgba(72, 169, 166, 0.05);
            box-shadow: 0 4px 16px rgba(72, 169, 166, 0.2);
        }
        
        .badge {
            display: inline-block;
            background: #FF8621;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .option-icon {
            font-size: 48px;
            text-align: center;
            margin: 16px 0;
        }
        
        .option-name {
            font-weight: 600;
            font-size: 16px;
            color: #01384B;
            text-align: center;
            margin-bottom: 8px;
        }
        
        .option-price {
            color: #FF8621;
            font-weight: 700;
            font-size: 15px;
            text-align: center;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
        }
        
        .current-price {
            text-align: center;
        }
        
        .current-price-label {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 4px;
        }
        
        .current-price-value {
            font-size: 24px;
            font-weight: 700;
            color: #FF8621;
        }
        
        button {
            background: #FF8621;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        button:hover:not(:disabled) {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        button:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }
        
        button.secondary {
            background: transparent;
            color: #01384B;
        }
        
        button.secondary:hover:not(:disabled) {
            background: #f3f4f6;
        }
        
        .summary {
            background: linear-gradient(135deg, #01384B 0%, #48A9A6 100%);
            color: white;
            padding: 32px;
            border-radius: 16px;
            margin-bottom: 24px;
        }
        
        .summary h3 {
            font-size: 24px;
            margin-bottom: 16px;
            color: white;
        }
        
        .summary-price {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .summary-vat {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .summary-details {
            background: white;
            border: 2px solid #e5e7eb;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 24px;
        }
        
        .summary-details h3 {
            color: #01384B;
            font-size: 20px;
            margin-bottom: 16px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .summary-row:last-child {
            border-bottom: none;
        }
        
        .summary-label {
            font-weight: 600;
            color: #01384B;
        }
        
        .summary-value {
            color: #4b5563;
        }
        
        .success-message {
            background: #d1fae5;
            border: 2px solid #10b981;
            color: #065f46;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }
        
        .error-message {
            background: #fee2e2;
            border: 2px solid #ef4444;
            color: #991b1b;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 24px;
            font-weight: 600;
        }
        
        .submit-button {
            width: 100%;
            background: linear-gradient(135deg, #FF8621 0%, #48A9A6 100%);
            padding: 16px;
            font-size: 18px;
            justify-content: center;
        }
        
        .info-box {
            background: white;
            padding: 48px;
            text-align: center;
        }
        
        .info-box p {
            color: #4b5563;
            font-size: 16px;
            margin-bottom: 24px;
        }
        
        @media (max-width: 768px) {
            .steps {
                flex-wrap: wrap;
            }
            
            .step-circle {
                width: 32px;
                height: 32px;
                font-size: 12px;
            }
            
            .options-grid.col-2,
            .options-grid.col-3 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function PoolConfigurator() {
            const [step, setStep] = useState(0);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [submitStatus, setSubmitStatus] = useState(null);
            
            const [config, setConfig] = useState({
                shape: null,
                size: null,
                depth: null,
                stairs: null,
                filtration: null,
                heating: null,
                cover: null,
                extras: []
            });

            const WEBHOOK_URL = 'https://hook.eu1.make.com/nsc9znumlgq7e37uigodxxnmlyckxwn9';

            const steps = [
                { id: 'shape', title: 'Tvar bazénu' },
                { id: 'size', title: 'Rozměry' },
                { id: 'depth', title: 'Hloubka' },
                { id: 'stairs', title: 'Schodiště' },
                { id: 'filtration', title: 'Filtrace' },
                { id: 'heating', title: 'Ohřev' },
                { id: 'cover', title: 'Zastřešení' },
                { id: 'extras', title: 'Doplňky' },
                { id: 'summary', title: 'Shrnutí' }
            ];

            const shapes = [
                { id: 'obdelnik', name: 'Obdélníkový', icon: '▭' },
                { id: 'kruhovy', name: 'Kruhový', icon: '●' }
            ];

            const sizesObdelnik = [
                { id: '3x5', name: '3 × 5 m', price: 38000 },
                { id: '3x6', name: '3 × 6 m', price: 44500 },
                { id: '3x7', name: '3 × 7 m', price: 51000 },
                { id: '3.5x5', name: '3,5 × 5 m', price: 44000 },
                { id: '3.5x6', name: '3,5 × 6 m', price: 52000, popular: true },
                { id: '3.5x7', name: '3,5 × 7 m', price: 59500 },
                { id: '3.5x8', name: '3,5 × 8 m', price: 70500 },
                { id: '4x6', name: '4 × 6 m', price: 58500 },
                { id: '4x7', name: '4 × 7 m', price: 68000 },
                { id: '4x8', name: '4 × 8 m', price: 76500 }
            ];

            const sizesKruhovy = [
                { id: 'k3-1.2', name: 'Ø 3 m', price: 23500 },
                { id: 'k3.5-1.2', name: 'Ø 3,5 m', price: 30000, popular: true },
                { id: 'k4-1.2', name: 'Ø 4 m', price: 38500 },
                { id: 'k4.5-1.2', name: 'Ø 4,5 m', price: 46500 }
            ];

            const depthsObdelnik = [
                { id: '1.2', name: '1,2 m', priceAdd: 0, popular: true },
                { id: '1.5', name: '1,5 m', priceAdd: 8000 }
            ];

            const stairs = [
                { id: 'rohove', name: 'Rohové schodiště', price: 0, popular: true },
                { id: 'rovne', name: 'Rovné schodiště', price: 8000 }
            ];

            const filtrations = [
                { id: 'none', name: 'Bez filtrace', price: 0 },
                { id: 'pisek6', name: 'Písková filtrace 6 m³/h', price: 15000, popular: true }
            ];

            const heating = [
                { id: 'none', name: 'Bez ohřevu', price: 0 },
                { id: 'tepelne-9kw', name: 'Tepelné čerpadlo 9 kW', price: 55000, popular: true }
            ];

            const covers = [
                { id: 'none', name: 'Bez zastřešení', price: 0 },
                { id: 'nizke', name: 'Nízké zastřešení', price: 85000, popular: true }
            ];

            const extras = [
                { id: 'protiproud', name: 'Protiproud', price: 28000 },
                { id: 'led', name: 'LED osvětlení', price: 6500 }
            ];

            const getCurrentSizes = () => {
                if (config.shape === 'obdelnik') return sizesObdelnik;
                if (config.shape === 'kruhovy') return sizesKruhovy;
                return [];
            };

            const calculateTotal = () => {
                let total = 0;
                const sizes = getCurrentSizes();
                const selectedSize = sizes.find(s => s.id === config.size);
                total += selectedSize?.price || 0;
                
                if (config.shape === 'obdelnik' && config.depth) {
                    const depth = depthsObdelnik.find(d => d.id === config.depth);
                    total += depth?.priceAdd || 0;
                }
                
                if (config.stairs) {
                    const stair = stairs.find(s => s.id === config.stairs);
                    total += stair?.price || 0;
                }
                
                if (config.filtration) {
                    const filt = filtrations.find(f => f.id === config.filtration);
                    total += filt?.price || 0;
                }
                
                if (config.heating) {
                    const heat = heating.find(h => h.id === config.heating);
                    total += heat?.price || 0;
                }
                
                if (config.cover) {
                    const cov = covers.find(c => c.id === config.cover);
                    total += cov?.price || 0;
                }
                
                config.extras.forEach(extraId => {
                    const extra = extras.find(e => e.id === extraId);
                    total += extra?.price || 0;
                });
                
                return Math.round(total * 1.21);
            };

            const handleSubmit = async () => {
                setIsSubmitting(true);
                setSubmitStatus(null);

                try {
                    const totalVAT = calculateTotal();
                    
                    const formData = {
                        datum: new Date().toLocaleString('cs-CZ'),
                        tvar: shapes.find(s => s.id === config.shape)?.name || '',
                        rozmery: getCurrentSizes().find(s => s.id === config.size)?.name || '',
                        hloubka: config.depth ? depthsObdelnik.find(d => d.id === config.depth)?.name : '1,2 m (v ceně)',
                        schodiste: stairs.find(s => s.id === config.stairs)?.name || '',
                        filtrace: filtrations.find(f => f.id === config.filtration)?.name || 'Neurčeno',
                        ohrev: heating.find(h => h.id === config.heating)?.name || 'Neurčeno',
                        zastreseni: covers.find(c => c.id === config.cover)?.name || 'Neurčeno',
                        doplnky: config.extras.map(id => extras.find(e => e.id === id)?.name).join(', ') || 'Žádné',
                        cena_s_dph: `${totalVAT.toLocaleString('cs-CZ')} Kč`
                    };

                    const response = await fetch(WEBHOOK_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(formData)
                    });

                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    setSubmitStatus('success');
                    
                } catch (error) {
                    console.error('Chyba:', error);
                    setSubmitStatus('error');
                } finally {
                    setIsSubmitting(false);
                }
            };

            const canProgress = () => {
                const currentStep = steps[step].id;
                if (currentStep === 'shape') return config.shape !== null;
                if (currentStep === 'size') return config.size !== null;
                if (currentStep === 'depth') return config.shape === 'kruhovy' || config.depth !== null;
                if (currentStep === 'stairs') return config.stairs !== null;
                if (currentStep === 'filtration') return config.filtration !== null;
                if (currentStep === 'heating') return config.heating !== null;
                if (currentStep === 'cover') return config.cover !== null;
                return true;
            };

            const renderStepContent = () => {
                const currentStep = steps[step].id;

                if (currentStep === 'shape') {
                    return (
                        <div className="options-grid col-2">
                            {shapes.map(shape => (
                                <div
                                    key={shape.id}
                                    className={`option-card ${config.shape === shape.id ? 'selected' : ''}`}
                                    onClick={() => setConfig(prev => ({ ...prev, shape: shape.id }))}
                                >
                                    <div className="option-icon">{shape.icon}</div>
                                    <div className="option-name">{shape.name}</div>
                                </div>
                            ))}
                        </div>
                    );
                }

                if (currentStep === 'size') {
                    const sizes = getCurrentSizes();
                    return (
                        <div className="options-grid col-3">
                            {sizes.map(size => (
                                <div
                                    key={size.id}
                                    className={`option-card ${config.size === size.id ? 'selected' : ''}`}
                                    onClick={() => setConfig(prev => ({ ...prev, size: size.id }))}
                                >
                                    {size.popular && <span className="badge">TOP</span>}
                                    <div className="option-name">{size.name}</div>
                                    <div className="option-price">{Math.round(size.price * 1.21).toLocaleString('cs-CZ')} Kč</div>
                                </div>
                            ))}
                        </div>
                    );
                }

                if (currentStep === 'depth') {
                    if (config.shape === 'kruhovy') {
                        return (
                            <div className="info-box">
                                <p>U kruhových bazénů je hloubka 1,2 m v ceně.</p>
                                <button onClick={() => setStep(step + 1)}>Pokračovat</button>
                            </div>
                        );
                    }
                    return (
                        <div className="options-grid col-2">
                            {depthsObdelnik.map(depth => (
                                <div
                                    key={depth.id}
                                    className={`option-card ${config.depth === depth.id ? 'selected' : ''}`}
                                    onClick={() => setConfig(prev => ({ ...prev, depth: depth.id }))}
                                >
                                    {depth.popular && <span className="badge">STANDARD</span>}
                                    <div className="option-name" style={{fontSize: '28px', marginBottom: '12px'}}>{depth.name}</div>
                                    <div className="option-price">
                                        {depth.priceAdd > 0 ? `+${Math.round(depth.priceAdd * 1.21).toLocaleString('cs-CZ')} Kč` : 'v ceně'}
                                    </div>
                                </div>
                            ))}
                        </div>
                    );
                }

                if (currentStep === 'stairs') {
                    return (
                        <div className="options-grid col-2">
                            {stairs.map(stair => (
                                <div
                                    key={stair.id}
                                    className={`option-card ${config.stairs === stair.id ? 'selected' : ''}`}
                                    onClick={() => setConfig(prev => ({ ...prev, stairs: stair.id }))}
                                >
                                    {stair.popular && <span className="badge">STANDARD</span>}
                                    <div className="option-name">{stair.name}</div>
                                    <div className="option-price">
                                        {stair.price > 0 ? `+${Math.round(stair.price * 1.21).toLocaleString('cs-CZ')} Kč` : 'v ceně'}
                                    </div>
                                </div>
                            ))}
                        </div>
                    );
                }

                if (currentStep === 'filtration') {
                    return (
                        <div className="options-grid col-2">
                            {filtrations.map(filt => (
                                <div
                                    key={filt.id}
                                    className={`option-card ${config.filtration === filt.id ? 'selected' : ''}`}
                                    onClick={() => setConfig(prev => ({ ...prev, filtration: filt.id }))}
                                >
                                    {filt.popular && <span className="badge">DOPORUČENO</span>}
                                    <div className="option-name">{filt.name}</div>
                                    <div className="option-price">
                                        {filt.price > 0 ? `+${Math.round(filt.price * 1.21).toLocaleString('cs-CZ')} Kč` : '—'}
                                    </div>
                                </div>
                            ))}
                        </div>
                    );
                }

                if (currentStep === 'heating') {
                    return (
                        <div className="options-grid col-2">
                            {heating.map(heat => (
                                <div
                                    key={heat.id}
                                    className={`option-card ${config.heating === heat.id ? 'selected' : ''}`}
                                    onClick={() => setConfig(prev => ({ ...prev, heating: heat.id }))}
                                >
                                    {heat.popular && <span className="badge">DOPORUČENO</span>}
                                    <div className="option-name">{heat.name}</div>
                                    <div className="option-price">
                                        {heat.price > 0 ? `+${Math.round(heat.price * 1.21).toLocaleString('cs-CZ')} Kč` : '—'}
                                    </div>
                                </div>
                            ))}
                        </div>
                    );
                }

                if (currentStep === 'cover') {
                    return (
                        <div className="options-grid col-2">
                            {covers.map(cover => (
                                <div
                                    key={cover.id}
                                    className={`option-card ${config.cover === cover.id ? 'selected' : ''}`}
                                    onClick={() => setConfig(prev => ({ ...prev, cover: cover.id }))}
                                >
                                    {cover.popular && <span className="badge">DOPORUČENO</span>}
                                    <div className="option-name">{cover.name}</div>
                                    <div className="option-price">
                                        {cover.price > 0 ? `+${Math.round(cover.price * 1.21).toLocaleString('cs-CZ')} Kč` : '—'}
                                    </div>
                                </div>
                            ))}
                        </div>
                    );
                }

                if (currentStep === 'extras') {
                    return (
                        <div className="options-grid col-3">
                            {extras.map(extra => (
                                <div
                                    key={extra.id}
                                    className={`option-card ${config.extras.includes(extra.id) ? 'selected' : ''}`}
                                    onClick={() => {
                                        setConfig(prev => ({
                                            ...prev,
                                            extras: prev.extras.includes(extra.id)
                                                ? prev.extras.filter(id => id !== extra.id)
                                                : [...prev.extras, extra.id]
                                        }));
                                    }}
                                >
                                    {config.extras.includes(extra.id) && <span style={{float: 'right', fontSize: '20px'}}>✓</span>}
                                    <div className="option-name">{extra.name}</div>
                                    <div className="option-price">+{Math.round(extra.price * 1.21).toLocaleString('cs-CZ')} Kč</div>
                                </div>
                            ))}
                        </div>
                    );
                }

                if (currentStep === 'summary') {
                    const total = calculateTotal();
                    
                    return (
                        <>
                            <div className="summary">
                                <h3>Vaše konfigurace</h3>
                                <div className="summary-price">{total.toLocaleString('cs-CZ')} Kč</div>
                                <div className="summary-vat">s DPH</div>
                            </div>

                            <div className="summary-details">
                                <h3>Souhrn:</h3>
                                <div className="summary-row">
                                    <span className="summary-label">Tvar:</span>
                                    <span className="summary-value">{shapes.find(s => s.id === config.shape)?.name}</span>
                                </div>
                                <div className="summary-row">
                                    <span className="summary-label">Rozměry:</span>
                                    <span className="summary-value">{getCurrentSizes().find(s => s.id === config.size)?.name}</span>
                                </div>
                                {config.depth && (
                                    <div className="summary-row">
                                        <span className="summary-label">Hloubka:</span>
                                        <span className="summary-value">{depthsObdelnik.find(d => d.id === config.depth)?.name}</span>
                                    </div>
                                )}
                                {!config.depth && config.shape === 'kruhovy' && (
                                    <div className="summary-row">
                                        <span className="summary-label">Hloubka:</span>
                                        <span className="summary-value">1,2 m</span>
                                    </div>
                                )}
                                <div className="summary-row">
                                    <span className="summary-label">Schodiště:</span>
                                    <span className="summary-value">{stairs.find(s => s.id === config.stairs)?.name}</span>
                                </div>
                                {config.filtration && (
                                    <div className="summary-row">
                                        <span className="summary-label">Filtrace:</span>
                                        <span className="summary-value">{filtrations.find(f => f.id === config.filtration)?.name}</span>
                                    </div>
                                )}
                                {config.heating && (
                                    <div className="summary-row">
                                        <span className="summary-label">Ohřev:</span>
                                        <span className="summary-value">{heating.find(h => h.id === config.heating)?.name}</span>
                                    </div>
                                )}
                                {config.cover && (
                                    <div className="summary-row">
                                        <span className="summary-label">Zastřešení:</span>
                                        <span className="summary-value">{covers.find(c => c.id === config.cover)?.name}</span>
                                    </div>
                                )}
                                {config.extras.length > 0 && (
                                    <div className="summary-row">
                                        <span className="summary-label">Doplňky:</span>
                                        <span className="summary-value">{config.extras.map(id => extras.find(e => e.id === id)?.name).join(', ')}</span>
                                    </div>
                                )}
                            </div>

                            {submitStatus === 'success' && (
                                <div className="success-message">
                                    <span style={{fontSize: '24px'}}>✓</span>
                                    <span>Poptávka byla úspěšně odeslána! Brzy vás kontaktujeme.</span>
                                </div>
                            )}

                            {submitStatus === 'error' && (
                                <div className="error-message">
                                    Chyba při odesílání. Zkuste to prosím znovu nebo nás kontaktujte přímo.
                                </div>
                            )}

                            <button 
                                className="submit-button"
                                onClick={handleSubmit}
                                disabled={isSubmitting}
                            >
                                {isSubmitting ? (
                                    <>
                                        <span>⟳</span>
                                        <span>Odesílám...</span>
                                    </>
                                ) : (
                                    <>
                                        <span>✉</span>
                                        <span>Odeslat poptávku</span>
                                    </>
                                )}
                            </button>
                        </>
                    );
                }

                return null;
            };

            return (
                <div className="container">
                    <div className="logo-container">
                        <img 
                            src="https://raw.githubusercontent.com/nemecekpetr/rentmil-konfigurator/main/logo%20rentmil.png"
                            alt="Rentmil"
                            className="logo"
                        />
                    </div>

                    <header>
                        <h1>Konfigurátor bazénů</h1>
                        <p className="subtitle">Vy zenujete, my bazénujeme</p>
                    </header>

                    <div className="progress-bar">
                        <div className="steps">
                            {steps.map((s, idx) => (
                                <div key={s.id} className="step-item">
                                    <div
                                        className={`step-circle ${
                                            idx === step ? 'active' :
                                            idx < step ? 'completed' :
                                            'pending'
                                        }`}
                                        onClick={() => {
                                            if (idx < step) setStep(idx);
                                        }}
                                    >
                                        {idx < step ? '✓' : idx + 1}
                                    </div>
                                    {idx < steps.length - 1 && (
                                        <div className={`step-line ${idx < step ? 'completed' : 'pending'}`}></div>
                                    )}
                                </div>
                            ))}
                        </div>
                        <div className="step-title">
                            Krok {step + 1} z {steps.length}: {steps[step].title}
                        </div>
                    </div>

                    <div className="content">
                        <h2>{steps[step].title}</h2>
                        {renderStepContent()}

                        {step < steps.length - 1 && (
                            <div className="navigation">
                                <button 
                                    className="secondary"
                                    onClick={() => setStep(Math.max(0, step - 1))}
                                    disabled={step === 0}
                                >
                                    <span>←</span>
                                    <span>Zpět</span>
                                </button>

                                <div className="current-price">
                                    <div className="current-price-label">Aktuální cena</div>
                                    <div className="current-price-value">
                                        {calculateTotal().toLocaleString('cs-CZ')} Kč
                                    </div>
                                </div>

                                <button
                                    onClick={() => setStep(Math.min(steps.length - 1, step + 1))}
                                    disabled={!canProgress()}
                                >
                                    <span>Další</span>
                                    <span>→</span>
                                </button>
                            </div>
                        )}

                        {step === steps.length - 1 && (
                            <div className="navigation" style={{justifyContent: 'flex-start'}}>
                                <button 
                                    className="secondary"
                                    onClick={() => setStep(step - 1)}
                                >
                                    <span>←</span>
                                    <span>Zpět</span>
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<PoolConfigurator />, document.getElementById('root'));
    </script>
</body>
</html>
