<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konfigurátor bazénů Rentmil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            margin: 0; 
            padding: 0;
            background: linear-gradient(180deg, #48A9A6 0%, #01384B 100%);
            min-height: 100vh;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin { animation: spin 1s linear infinite; }
        
        /* Rentmil brandové barvy */
        .bg-rentmil-blue { background-color: #01384B; }
        .bg-rentmil-water { background-color: #48A9A6; }
        .bg-rentmil-orange { background-color: #FF8621; }
        .bg-rentmil-gradient { background: linear-gradient(180deg, #48A9A6 0%, #01384B 100%); }
        .text-rentmil-blue { color: #01384B; }
        .text-rentmil-water { color: #48A9A6; }
        .text-rentmil-orange { color: #FF8621; }
        .border-rentmil-water { border-color: #48A9A6; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script>
        (function initApp() {
            if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
                setTimeout(initApp, 50);
                return;
            }

            const { useState, createElement: h } = React;

            const ChevronRight = ({ size = 24 }) => h('svg', { width: size, height: size, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: '2' },
                h('polyline', { points: '9 18 15 12 9 6' })
            );

            const ChevronLeft = ({ size = 24 }) => h('svg', { width: size, height: size, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: '2' },
                h('polyline', { points: '15 18 9 12 15 6' })
            );

            const Check = ({ size = 24 }) => h('svg', { width: size, height: size, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: '2' },
                h('polyline', { points: '20 6 9 17 4 12' })
            );

            const Mail = ({ size = 24 }) => h('svg', { width: size, height: size, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: '2' },
                h('path', { d: 'M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z' }),
                h('polyline', { points: '22,6 12,13 2,6' })
            );

            const Loader2 = ({ size = 24, className = '' }) => h('svg', { width: size, height: size, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: '2', className },
                h('path', { d: 'M21 12a9 9 0 1 1-6.219-8.56' })
            );

            const PoolConfigurator = () => {
                const [step, setStep] = useState(0);
                const [isSubmitting, setIsSubmitting] = useState(false);
                const [submitStatus, setSubmitStatus] = useState(null);
                
                const [config, setConfig] = useState({
                    shape: null, size: null, depth: null, stairs: null,
                    filtration: null, heating: null, cover: null, extras: []
                });
                
                const [contactData, setContactData] = useState({
                    name: '', email: '', phone: '', address: ''
                });

                const WEBHOOK_URL = 'https://hook.eu1.make.com/nsc9znumlgq7e37uigodxxnmlyckxwn9';

                const steps = [
                    { id: 'shape', title: 'Tvar bazénu' },
                    { id: 'size', title: 'Rozměry' },
                    { id: 'depth', title: 'Hloubka' },
                    { id: 'stairs', title: 'Schodiště' },
                    { id: 'filtration', title: 'Filtrace' },
                    { id: 'heating', title: 'Ohřev' },
                    { id: 'cover', title: 'Zastřešení' },
                    { id: 'extras', title: 'Doplňky' },
                    { id: 'contact', title: 'Kontaktní údaje' },
                    { id: 'summary', title: 'Shrnutí' }
                ];

                const shapes = [
                    { id: 'obdelnik', name: 'Obdélníkový', icon: '▭' },
                    { id: 'rohovy', name: 'Rohový', icon: '▢', popular: true },
                    { id: 'kruhovy', name: 'Kruhový', icon: '●' }
                ];

                const sizesObdelnik = [
                    { id: '2x5', name: '2 × 5 m', price: 30500 },
                    { id: '3x6', name: '3 × 6 m', price: 44500, popular: true },
                    { id: '4x8', name: '4 × 8 m', price: 76500 }
                ];

                const sizesRohovy = [
                    { id: '3x4', name: '3 × 4 m', price: 35500, popular: true },
                    { id: '3x6', name: '3 × 6 m', price: 49000 },
                    { id: '4x8', name: '4 × 8 m', price: 82500 }
                ];

                const sizesKruhovy = [
                    { id: 'k3-1', name: 'Ø 3 m', price: 21000, popular: true },
                    { id: 'k4-1.35', name: 'Ø 4 m', price: 41000 }
                ];

                const depths = [
                    { id: '1.2', name: '1,2 m', priceAdd: 3000, popular: true },
                    { id: '1.35', name: '1,35 m', priceAdd: 5000 },
                    { id: '1.5', name: '1,5 m', priceAdd: 7000 }
                ];

                const stairs = [
                    { id: 'rohove', name: 'Rohové schodiště', price: 0, popular: true },
                    { id: 'rovne', name: 'Rovné schodiště', price: 8000 }
                ];

                const filtrations = [
                    { id: 'none', name: 'Bez filtrace', price: 0 },
                    { id: 'pisek6', name: 'Písková 6 m³/h', price: 15000, popular: true }
                ];

                const heating = [
                    { id: 'none', name: 'Bez ohřevu', price: 0 },
                    { id: 'tepelne-9kw', name: 'Tepelné čerpadlo 9 kW', price: 55000, popular: true }
                ];

                const covers = [
                    { id: 'none', name: 'Bez zastřešení', price: 0 },
                    { id: 'nizke', name: 'Nízké zastřešení', price: 85000, popular: true }
                ];

                const extras = [
                    { id: 'protiproud', name: 'Protiproud', price: 28000 },
                    { id: 'led', name: 'LED osvětlení', price: 6500 }
                ];

                const getCurrentSizes = () => {
                    if (config.shape === 'obdelnik') return sizesObdelnik;
                    if (config.shape === 'rohovy') return sizesRohovy;
                    if (config.shape === 'kruhovy') return sizesKruhovy;
                    return [];
                };

                const calculateTotal = () => {
                    let total = 0;
                    const sizes = getCurrentSizes();
                    const selectedSize = sizes.find(s => s.id === config.size);
                    total += selectedSize?.price || 0;
                    
                    if (config.shape !== 'kruhovy' && config.depth) {
                        const depth = depths.find(d => d.id === config.depth);
                        total += depth?.priceAdd || 0;
                    }
                    
                    if (config.stairs) {
                        const stair = stairs.find(s => s.id === config.stairs);
                        total += stair?.price || 0;
                    }
                    
                    if (config.filtration) {
                        const filt = filtrations.find(f => f.id === config.filtration);
                        total += filt?.price || 0;
                    }
                    
                    if (config.heating) {
                        const heat = heating.find(h => h.id === config.heating);
                        total += heat?.price || 0;
                    }
                    
                    if (config.cover) {
                        const cov = covers.find(c => c.id === config.cover);
                        total += cov?.price || 0;
                    }
                    
                    config.extras.forEach(extraId => {
                        const extra = extras.find(e => e.id === extraId);
                        total += extra?.price || 0;
                    });
                    
                    return Math.round(total * 1.21);
                };

                const handleSubmit = async () => {
                    setIsSubmitting(true);
                    setSubmitStatus(null);

                    try {
                        const totalVAT = calculateTotal();
                        
                        const formData = {
                            datum: new Date().toLocaleString('cs-CZ'),
                            jmeno: contactData.name,
                            email: contactData.email,
                            telefon: contactData.phone,
                            adresa: contactData.address,
                            tvar: shapes.find(s => s.id === config.shape)?.name || '',
                            rozmery: getCurrentSizes().find(s => s.id === config.size)?.name || '',
                            hloubka: config.depth ? depths.find(d => d.id === config.depth)?.name : 'V ceně (kruhový)',
                            schodiste: stairs.find(s => s.id === config.stairs)?.name || '',
                            filtrace: filtrations.find(f => f.id === config.filtration)?.name || 'Neurčeno',
                            ohrev: heating.find(h => h.id === config.heating)?.name || 'Neurčeno',
                            zastreseni: covers.find(c => c.id === config.cover)?.name || 'Neurčeno',
                            doplnky: config.extras.map(id => extras.find(e => e.id === id)?.name).join(', ') || 'Žádné',
                            cena_s_dph: `${totalVAT.toLocaleString('cs-CZ')} Kč`
                        };

                        const response = await fetch(WEBHOOK_URL, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(formData)
                        });

                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        setSubmitStatus('success');
                        
                    } catch (error) {
                        console.error('Chyba:', error);
                        setSubmitStatus('error');
                    } finally {
                        setIsSubmitting(false);
                    }
                };

                const renderStep = () => {
                    const currentStep = steps[step].id;

                    if (currentStep === 'shape') {
                        return h('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6' },
                            shapes.map(shape =>
                                h('div', {
                                    key: shape.id,
                                    onClick: () => setConfig(prev => ({ ...prev, shape: shape.id })),
                                    className: `p-8 border-2 rounded-xl cursor-pointer transition-all hover:shadow-lg ${
                                        config.shape === shape.id ? 'border-rentmil-water bg-blue-50' : 'border-gray-300 bg-white'
                                    }`
                                },
                                    shape.popular && h('span', { className: 'text-xs bg-rentmil-orange text-white px-2 py-1 rounded' }, 'TOP'),
                                    h('div', { className: 'text-6xl text-center my-4' }, shape.icon),
                                    h('h3', { className: 'text-xl font-bold text-center text-rentmil-blue' }, shape.name)
                                )
                            )
                        );
                    }

                    if (currentStep === 'size') {
                        const sizes = getCurrentSizes();
                        return h('div', { className: 'grid grid-cols-2 md:grid-cols-3 gap-4' },
                            sizes.map(size =>
                                h('div', {
                                    key: size.id,
                                    onClick: () => setConfig(prev => ({ ...prev, size: size.id })),
                                    className: `p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-lg ${
                                        config.size === size.id ? 'border-rentmil-water bg-blue-50' : 'border-gray-300 bg-white'
                                    }`
                                },
                                    size.popular && h('span', { className: 'text-xs bg-rentmil-orange text-white px-2 py-1 rounded' }, 'TOP'),
                                    h('div', { className: 'text-lg font-bold text-center text-rentmil-blue' }, size.name),
                                    h('div', { className: 'text-rentmil-orange text-center font-semibold' }, `${Math.round(size.price * 1.21).toLocaleString('cs-CZ')} Kč s DPH`)
                                )
                            )
                        );
                    }

                    if (currentStep === 'depth') {
                        if (config.shape === 'kruhovy') {
                            return h('div', { className: 'text-center py-12' },
                                h('p', { className: 'text-lg mb-4 text-white' }, 'U kruhových bazénů je hloubka v ceně.'),
                                h('button', {
                                    onClick: () => setStep(step + 1),
                                    className: 'bg-rentmil-orange text-white px-8 py-3 rounded-lg hover:opacity-90 transition-all font-semibold'
                                }, 'Pokračovat')
                            );
                        }
                        return h('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-4' },
                            depths.map(depth =>
                                h('div', {
                                    key: depth.id,
                                    onClick: () => setConfig(prev => ({ ...prev, depth: depth.id })),
                                    className: `p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-lg ${
                                        config.depth === depth.id ? 'border-rentmil-water bg-blue-50' : 'border-gray-300 bg-white'
                                    }`
                                },
                                    h('div', { className: 'text-3xl font-bold text-center mb-2 text-rentmil-blue' }, depth.name),
                                    h('div', { className: 'text-rentmil-orange text-center font-semibold' },
                                        depth.priceAdd > 0 ? `+${Math.round(depth.priceAdd * 1.21).toLocaleString('cs-CZ')} Kč s DPH` : 'v ceně'
                                    )
                                )
                            )
                        );
                    }

                    if (currentStep === 'stairs') {
                        return h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-6' },
                            stairs.map(stair =>
                                h('div', {
                                    key: stair.id,
                                    onClick: () => setConfig(prev => ({ ...prev, stairs: stair.id })),
                                    className: `p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-lg ${
                                        config.stairs === stair.id ? 'border-rentmil-water bg-blue-50' : 'border-gray-300 bg-white'
                                    }`
                                },
                                    h('div', { className: 'text-lg font-bold mb-2 text-rentmil-blue' }, stair.name),
                                    h('div', { className: 'text-rentmil-orange font-semibold' },
                                        stair.price > 0 ? `+${Math.round(stair.price * 1.21).toLocaleString('cs-CZ')} Kč s DPH` : 'v ceně'
                                    )
                                )
                            )
                        );
                    }

                    if (currentStep === 'filtration') {
                        return h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-6' },
                            filtrations.map(filt =>
                                h('div', {
                                    key: filt.id,
                                    onClick: () => setConfig(prev => ({ ...prev, filtration: filt.id })),
                                    className: `p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-lg ${
                                        config.filtration === filt.id ? 'border-rentmil-water bg-blue-50' : 'border-gray-300 bg-white'
                                    }`
                                },
                                    h('div', { className: 'text-lg font-bold mb-2 text-rentmil-blue' }, filt.name),
                                    h('div', { className: 'text-rentmil-orange font-semibold' },
                                        filt.price > 0 ? `+${Math.round(filt.price * 1.21).toLocaleString('cs-CZ')} Kč s DPH` : '—'
                                    )
                                )
                            )
                        );
                    }

                    if (currentStep === 'heating') {
                        return h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-6' },
                            heating.map(heat =>
                                h('div', {
                                    key: heat.id,
                                    onClick: () => setConfig(prev => ({ ...prev, heating: heat.id })),
                                    className: `p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-lg ${
                                        config.heating === heat.id ? 'border-rentmil-water bg-blue-50' : 'border-gray-300 bg-white'
                                    }`
                                },
                                    h('div', { className: 'text-lg font-bold mb-2 text-rentmil-blue' }, heat.name),
                                    h('div', { className: 'text-rentmil-orange font-semibold' },
                                        heat.price > 0 ? `+${Math.round(heat.price * 1.21).toLocaleString('cs-CZ')} Kč s DPH` : '—'
                                    )
                                )
                            )
                        );
                    }

                    if (currentStep === 'cover') {
                        return h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-6' },
                            covers.map(cover =>
                                h('div', {
                                    key: cover.id,
                                    onClick: () => setConfig(prev => ({ ...prev, cover: cover.id })),
                                    className: `p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-lg ${
                                        config.cover === cover.id ? 'border-rentmil-water bg-blue-50' : 'border-gray-300 bg-white'
                                    }`
                                },
                                    h('div', { className: 'text-lg font-bold mb-2 text-rentmil-blue' }, cover.name),
                                    h('div', { className: 'text-rentmil-orange font-semibold' },
                                        cover.price > 0 ? `+${Math.round(cover.price * 1.21).toLocaleString('cs-CZ')} Kč s DPH` : '—'
                                    )
                                )
                            )
                        );
                    }

                    if (currentStep === 'extras') {
                        return h('div', { className: 'grid grid-cols-2 md:grid-cols-3 gap-4' },
                            extras.map(extra =>
                                h('div', {
                                    key: extra.id,
                                    onClick: () => {
                                        setConfig(prev => ({
                                            ...prev,
                                            extras: prev.extras.includes(extra.id)
                                                ? prev.extras.filter(id => id !== extra.id)
                                                : [...prev.extras, extra.id]
                                        }));
                                    },
                                    className: `p-5 border-2 rounded-xl cursor-pointer transition-all hover:shadow-lg ${
                                        config.extras.includes(extra.id) ? 'border-rentmil-water bg-blue-50' : 'border-gray-300 bg-white'
                                    }`
                                },
                                    config.extras.includes(extra.id) && h('div', { className: 'flex justify-end mb-1' },
                                        h(Check, { size: 20, className: 'text-rentmil-water' })
                                    ),
                                    h('div', { className: 'font-semibold text-sm mb-2 text-rentmil-blue' }, extra.name),
                                    h('div', { className: 'text-rentmil-orange text-sm font-semibold' }, `+${Math.round(extra.price * 1.21).toLocaleString('cs-CZ')} Kč s DPH`)
                                )
                            )
                        );
                    }

                    if (currentStep === 'contact') {
                        return h('div', { className: 'max-w-2xl mx-auto' },
                            h('div', { className: 'bg-white rounded-xl p-8 space-y-6' },
                                h('div', { className: 'space-y-2' },
                                    h('label', { className: 'block text-sm font-semibold text-rentmil-blue' }, 'Celé jméno *'),
                                    h('input', {
                                        type: 'text',
                                        value: contactData.name,
                                        onChange: (e) => setContactData({...contactData, name: e.target.value}),
                                        className: 'w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-rentmil-water focus:outline-none transition-colors',
                                        placeholder: 'Jan Novák',
                                        required: true
                                    })
                                ),
                                h('div', { className: 'space-y-2' },
                                    h('label', { className: 'block text-sm font-semibold text-rentmil-blue' }, 'Email *'),
                                    h('input', {
                                        type: 'email',
                                        value: contactData.email,
                                        onChange: (e) => setContactData({...contactData, email: e.target.value}),
                                        className: 'w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-rentmil-water focus:outline-none transition-colors',
                                        placeholder: 'jan.novak@email.cz',
                                        required: true
                                    })
                                ),
                                h('div', { className: 'space-y-2' },
                                    h('label', { className: 'block text-sm font-semibold text-rentmil-blue' }, 'Telefon *'),
                                    h('input', {
                                        type: 'tel',
                                        value: contactData.phone,
                                        onChange: (e) => setContactData({...contactData, phone: e.target.value}),
                                        className: 'w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-rentmil-water focus:outline-none transition-colors',
                                        placeholder: '+420 123 456 789',
                                        required: true
                                    })
                                ),
                                h('div', { className: 'space-y-2' },
                                    h('label', { className: 'block text-sm font-semibold text-rentmil-blue' }, 'Adresa instalace'),
                                    h('input', {
                                        type: 'text',
                                        value: contactData.address,
                                        onChange: (e) => setContactData({...contactData, address: e.target.value}),
                                        className: 'w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-rentmil-water focus:outline-none transition-colors',
                                        placeholder: 'Praha 5, Radlická 10'
                                    })
                                ),
                                h('div', { className: 'bg-blue-50 border-l-4 border-rentmil-water p-4 rounded' },
                                    h('p', { className: 'text-sm text-gray-600' }, '* Povinné pole')
                                )
                            )
                        );
                    }

                    if (currentStep === 'summary') {
                        const total = calculateTotal();
                        
                        return h('div', { className: 'space-y-6' },
                            h('div', { className: 'bg-white border-2 border-gray-200 p-6 rounded-xl shadow-lg' },
                                h('h3', { className: 'text-xl font-bold mb-4 text-rentmil-blue' }, 'Kontaktní údaje:'),
                                h('div', { className: 'space-y-3' },
                                    h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Jméno:'),
                                        h('span', { className: 'text-gray-700' }, contactData.name)
                                    ),
                                    h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Email:'),
                                        h('span', { className: 'text-gray-700' }, contactData.email)
                                    ),
                                    h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Telefon:'),
                                        h('span', { className: 'text-gray-700' }, contactData.phone)
                                    ),
                                    contactData.address && h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Adresa instalace:'),
                                        h('span', { className: 'text-gray-700' }, contactData.address)
                                    )
                                )
                            ),
                            h('div', { className: 'bg-white border-2 border-gray-200 p-6 rounded-xl shadow-lg' },
                                h('h3', { className: 'text-xl font-bold mb-4 text-rentmil-blue' }, 'Konfigurace bazénu:'),
                                h('div', { className: 'space-y-3' },
                                    h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Tvar:'),
                                        h('span', { className: 'text-gray-700' }, shapes.find(s => s.id === config.shape)?.name)
                                    ),
                                    h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Rozměry:'),
                                        h('span', { className: 'text-gray-700' }, getCurrentSizes().find(s => s.id === config.size)?.name)
                                    ),
                                    config.depth && h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Hloubka:'),
                                        h('span', { className: 'text-gray-700' }, depths.find(d => d.id === config.depth)?.name)
                                    ),
                                    h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Schodiště:'),
                                        h('span', { className: 'text-gray-700' }, stairs.find(s => s.id === config.stairs)?.name)
                                    ),
                                    config.filtration && h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Filtrace:'),
                                        h('span', { className: 'text-gray-700' }, filtrations.find(f => f.id === config.filtration)?.name)
                                    ),
                                    config.heating && h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Ohřev:'),
                                        h('span', { className: 'text-gray-700' }, heating.find(h => h.id === config.heating)?.name)
                                    ),
                                    config.cover && h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Zastřešení:'),
                                        h('span', { className: 'text-gray-700' }, covers.find(c => c.id === config.cover)?.name)
                                    ),
                                    config.extras.length > 0 && h('div', { className: 'flex justify-between py-2 border-b border-gray-200' },
                                        h('span', { className: 'font-semibold text-rentmil-blue' }, 'Doplňky:'),
                                        h('span', { className: 'text-gray-700' }, config.extras.map(id => extras.find(e => e.id === id)?.name).join(', '))
                                    )
                                )
                            ),
                            h('div', { className: 'bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 p-6 rounded-xl' },
                                h('div', { className: 'flex justify-between items-center' },
                                    h('span', { className: 'text-lg font-semibold text-gray-700' }, 'Celková cena s DPH:'),
                                    h('span', { className: 'text-3xl font-bold text-green-600' }, `${total.toLocaleString('cs-CZ')} Kč`)
                                )
                            ),
                            submitStatus === 'success' && h('div', { className: 'bg-green-50 border-2 border-green-500 text-green-800 p-4 rounded-xl' },
                                h('div', { className: 'flex items-center gap-2' },
                                    h(Check, { size: 24 }),
                                    h('span', { className: 'font-semibold' }, 'Poptávka byla úspěšně odeslána! Brzy vás kontaktujeme.')
                                )
                            ),
                            submitStatus === 'error' && h('div', { className: 'bg-red-50 border-2 border-red-500 text-red-800 p-4 rounded-xl' },
                                h('span', { className: 'font-semibold' }, 'Chyba při odesílání. Zkuste to prosím znovu nebo nás kontaktujte přímo.')
                            ),
                            h('button', {
                                onClick: handleSubmit,
                                disabled: isSubmitting,
                                className: 'w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-xl font-bold flex items-center justify-center gap-2 transition-all disabled:bg-gray-400 disabled:cursor-not-allowed shadow-lg text-lg'
                            },
                                isSubmitting ? [
                                    h(Loader2, { size: 24, className: 'animate-spin', key: 'loader' }),
                                    'Odesílám...'
                                ] : [
                                    h(Mail, { size: 24, key: 'mail' }),
                                    'Odeslat poptávku'
                                ]
                            )
                        );
                    }

                    return null;
                };

                const canProgress = () => {
                    const currentStep = steps[step].id;
                    if (currentStep === 'shape') return config.shape !== null;
                    if (currentStep === 'size') return config.size !== null;
                    if (currentStep === 'depth') return config.shape === 'kruhovy' || config.depth !== null;
                    if (currentStep === 'stairs') return config.stairs !== null;
                    if (currentStep === 'filtration') return config.filtration !== null;
                    if (currentStep === 'heating') return config.heating !== null;
                    if (currentStep === 'cover') return config.cover !== null;
                    if (currentStep === 'contact') return contactData.name && contactData.email && contactData.phone;
                    return true;
                };

                return h('div', { className: 'min-h-screen p-4' },
                    h('div', { className: 'max-w-6xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden' },
                        h('div', { className: 'bg-white p-6 text-center border-b' },
                            h('img', { 
                                src: 'https://raw.githubusercontent.com/nemecekpetr/rentmil-konfigurator/main/logo%20rentmil.png',
                                alt: 'Rentmil',
                                className: 'mx-auto',
                                style: { maxWidth: '200px', height: 'auto' }
                            })
                        ),
                        h('div', { className: 'bg-rentmil-orange text-white p-8' },
                            h('h1', { className: 'text-3xl font-bold' }, 'Konfigurátor bazénů'),
                            h('p', { className: 'text-white mt-2 opacity-90' }, 'Vy zenujete, my bazénujeme')
                        ),
                        h('div', { className: 'bg-gray-50 px-8 py-6' },
                            h('div', { className: 'flex justify-between items-center mb-2' },
                                steps.map((s, idx) =>
                                    h('div', { key: s.id, className: 'flex items-center flex-1' },
                                        h('div', {
                                            onClick: () => {
                                                if (idx < step) setStep(idx);
                                            },
                                            className: `w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold transition-all ${
                                                idx === step ? 'bg-rentmil-orange text-white scale-110' :
                                                idx < step ? 'bg-rentmil-water text-white cursor-pointer hover:scale-105' : 
                                                'bg-gray-300 text-gray-600'
                                            }`
                                        }, idx < step ? h(Check, { size: 18 }) : idx + 1),
                                        idx < steps.length - 1 && h('div', {
                                            className: `flex-1 h-1 mx-2 transition-all ${
                                                idx < step ? 'bg-rentmil-water' : 'bg-gray-300'
                                            }`
                                        })
                                    )
                                )
                            ),
                            h('div', { className: 'text-center text-sm font-semibold text-rentmil-blue mt-4' },
                                `Krok ${step + 1} z ${steps.length}: ${steps[step].title}`
                            )
                        ),
                        h('div', { className: 'p-8' },
                            h('h2', { className: 'text-2xl font-bold mb-6 text-rentmil-blue' }, steps[step].title),
                            renderStep()
                        ),
                        step < steps.length - 1 && h('div', { className: 'bg-gray-50 px-8 py-6 flex justify-between items-center border-t' },
                            h('button', {
                                onClick: () => setStep(Math.max(0, step - 1)),
                                disabled: step === 0,
                                className: 'flex items-center gap-2 px-6 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 transition-colors text-rentmil-blue'
                            },
                                h(ChevronLeft, { size: 20 }),
                                'Zpět'
                            ),
                            h('div', { className: 'text-center' },
                                h('div', { className: 'text-sm text-gray-600' }, 'Aktuální cena'),
                                h('div', { className: 'text-2xl font-bold text-rentmil-orange' },
                                    `${calculateTotal().toLocaleString('cs-CZ')} Kč s DPH`
                                )
                            ),
                            h('button', {
                                onClick: () => setStep(Math.min(steps.length - 1, step + 1)),
                                disabled: !canProgress(),
                                className: 'flex items-center gap-2 bg-rentmil-orange text-white px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed'
                            },
                                'Další',
                                h(ChevronRight, { size: 20 })
                            )
                        ),
                        step === steps.length - 1 && h('div', { className: 'bg-gray-50 px-8 py-6 border-t' },
                            h('button', {
                                onClick: () => setStep(step - 1),
                                className: 'flex items-center gap-2 px-6 py-3 rounded-lg font-semibold hover:bg-gray-200 transition-colors text-rentmil-blue'
                            },
                                h(ChevronLeft, { size: 20 }),
                                'Zpět'
                            )
                        )
                    )
                );
            };

            ReactDOM.render(h(PoolConfigurator), document.getElementById('root'));
        })();
    </script>
</body>
</html>
